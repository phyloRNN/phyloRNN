{
  "$schema": "https://raw.githubusercontent.com/jetify-com/devbox/0.13.7/.schema/devbox.schema.json",
  "packages": [
    "python@3.9"
  ],
  "shell": {
    "init_hook": [
      "echo 'Welcome to devbox for phyloRNN! ' ",
      ". $VENV_DIR/bin/activate",
      "python -m ensurepip --upgrade > /dev/null 2>&1",
      "pip -q install --upgrade pip",
      "pip -q install jupyter",
      "pip -q install setuptools",
      "pip -q install memory_profiler",
      "pip -q install ipykernel",
      "pip -q install phyloRNN==0.41.1",
      "python -m ipykernel install --user --name=devbox_kernel --display-name 'phyloRNN' > /dev/null 2>&1"
    ],
    "scripts": {
      "test": [
        "python -m unittest tests/*.py"
      ],
      "download_clownfish_data": [
        "mkdir -p data && cd data",
        "wget -c https://datadryad.org/api/v2/files/3194922/download",
        "mv download Chr1.WGAlign.FromBam.Filtered.fasta"
      ],
      "download_model": [
        "mkdir -p data && cd data",
        "wget https://github.com/phyloRNN/Scripts_and_data/blob/main/Scripts/Trained_models.zip"
      ],
      "install_phyml": [
        "sudo apt-get update",
        "sudo apt install phyml"
      ],
      "install_seq-gen": [
        "sudo apt-get update",
        "sudo apt-get install seq-gen"
      ],
      "start_server_jupyter": [
        "nohup jupyter notebook --no-browser --port=8889 --ip=0.0.0.0 &"
      ],
      "show_running_server_jupyter": [
        "jupyter notebook list"
      ],
      "kill_all_server_jupyter": [
        "pkill -f jupyter-notebook"
      ],
      "is_gpu_avaible": [
        "python -c \"import tensorflow as tf; print('GPU is', 'available' if tf.config.list_physical_devices('GPU') else 'not available')\""
      ]
    }
  }
}
